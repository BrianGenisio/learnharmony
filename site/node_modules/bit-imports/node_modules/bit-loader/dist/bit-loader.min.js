/*! bit-loader v0.2.5 - 2015-06-26. (c) 2015 Miguel Castillo. Licensed under MIT */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.bitloader=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){a=a||{},this._name=d.configureName(a.name),this._match=d.configureMatch(a.match)}var e=a("./matcher"),f=0;d.configureName=function(a){return a||"rule-"+f++},d.configureMatch=function(a){return a=a||[],a=a instanceof Array?a:[a],a.map(function(a){return a&&a.constructor===Function?a:e(a)})},d.prototype.getName=function(){return this._name},d.prototype.getLength=function(){return this._match.length},d.prototype.addMatcher=function(a){return this._match=this._match.concat(d.configureMatch(a)),this},d.prototype.match=d.prototype.matchAny=function(a){var b,c,e=this._match;for(b=0,c=e.length;c>b;b++)if(d.__match(e[b],a))return!0;return!1},d.prototype.matchAll=function(a){var b,c,e=this._match;for(b=0,c=e.length;c>b;b++)if(!d.__match(e[b],a))return!1;return!0},d.__match=function(a,b){try{return a(b)}catch(c){}return!1},d.matcher=e,b.exports=d},{"./matcher":2}],2:[function(a,b,c){function d(a){return a instanceof RegExp?function(b){return a.test(b)}:function(b){return b===a}}d.extension=function(a){if(""===a||"string"!=typeof a)throw new TypeError("Matching rule must be a string");return a=new RegExp("\\.("+a+")$"),function(b){return a.test(b)}},d.string=function(a){if("string"!=typeof a)throw new TypeError("Match type must be a string");return function(b){return a===b}},d.regex=function(a){if(""!==a&&"string"==typeof a&&(a=new RegExp(a)),!(a instanceof RegExp))throw new TypeError("Match type must be a string or a regex");return function(b){return a.test(b)}},b.exports=d},{}],3:[function(a,b,c){function d(a){a=a||{},this.settings=a,this.context=o.getById(q()),this.plugins={},this.rules={ignore:{fetch:new e,transform:new e,dependency:new e,compile:new e}},this.pipelines={resolve:new p(this),fetch:new p(this),transform:new p(this),dependency:new p(this),compile:new p(this)},this.providers={loader:new d.Loader(this),importer:new d.Import(this)};var b=this.providers;this.resolve=a.resolve||(new d.Resolver).resolve,this.fetch=a.fetch||(new d.Fetcher).fetch,this.compile=a.compile||(new d.Compiler).compile,this.load=b.loader.load.bind(b.loader),this.register=b.loader.register.bind(b.loader),this["import"]=b.importer["import"].bind(b.importer);for(var c in a.plugins)this.plugin(c,a.plugins[c]);for(var f in a.pipelines)this.pipelines.hasOwnProperty(f)&&this.pipelines[f].use(a.pipelines[f])}var e=a("roolio"),f=a("./logger"),g=a("./utils"),h=a("./interfaces/fetcher"),i=a("./interfaces/compiler"),j=a("./interfaces/resolver"),k=a("./import"),l=a("./loader"),m=a("./module"),n=a("./plugin"),o=a("./registry"),p=a("./middleware"),q=o.idGenerator("bitloader");d.prototype.resolve=function(){},d.prototype.fetch=function(){},d.prototype.load=function(){},d.prototype["import"]=function(){},d.prototype.compile=function(){},d.prototype.register=function(){},d.prototype.clear=function(){this.context.clear()},d.prototype.hasModule=function(a){return this.context.hasModule(a)||this.providers.loader.isLoaded(a)},d.prototype.getModule=function(a){if(!this.hasModule(a))throw new TypeError("Module `"+a+"` has not yet been loaded");return this.context.hasModule(a)?this.context.getModule(a):this.context.setModule(m.State.LOADED,a,this.providers.loader.syncBuild(a))},d.prototype.setModule=function(a){var b=a.name;if(!(a instanceof m))throw new TypeError("Module `"+b+"` is not an instance of Module");if(!b||"string"!=typeof b)throw new TypeError("Module must have a name");if(this.context.hasModule(b))throw new TypeError("Module instance `"+b+"` already exists");return this.context.setModule(m.State.LOADED,b,a)},d.prototype.deleteModule=function(a){if(!this.context.hasModule(a))throw new TypeError("Module instance `"+a+"` does not exists");return this.context.deleteModule(a)},d.prototype.getModuleCode=function(a){if(!this.hasModule(a))throw new TypeError("Module `"+a+"` has not yet been loaded");return this.getModule(a).code},d.prototype.setModuleCode=function(a,b){if(this.hasModule(a))throw new TypeError("Module code for `"+a+"` already exists");var c=new m({name:a,code:b});return this.setModule(c).code},d.prototype.isModuleCached=function(a){return this.context.hasModule(a)},d.prototype.ignore=function(a){if(!a)throw new TypeError("Must provide a rule configuration");var b,c,d;for((a instanceof Array||"string"==typeof a)&&(a={match:a}),d=a.name?"*"===a.name?Object.keys(this.rules.ignore):g.isArray(a.name)?a.name:[a.name]:["transform","dependency"],b=0,c=d.length;c>b;b++)this.rules.ignore[d[b]].addMatcher(a.match);return this},d.prototype.plugin=function(a,b){function c(a){a.deferred&&e.push(a.deferred)}g.isPlainObject(a)&&(b=a,a=null);var d;this.plugins.hasOwnProperty(a)?d=this.plugins[a]:(d=new n(a,this),this.plugins[d.name]=d);var e=[];return d.configure(b,c),e.length&&this.ignore({match:e}),d},d.prototype.hasPlugin=function(a){return this.plugins.hasOwnProperty(a)},d.prototype.getPlugin=function(a){if(this.plugins.hasOwnProperty(a))throw new TypeError("Plugin '"+a+"' not found");return this.plugins[a]},d.Utils=g,d.Registry=o,d.Loader=l,d.Import=k,d.Module=m,d.Plugin=n,d.Resolver=j,d.Fetcher=h,d.Compiler=i,d.Middleware=p,d.Rule=e,d.Logger=f,b.exports=d},{"./import":4,"./interfaces/compiler":5,"./interfaces/fetcher":6,"./interfaces/resolver":7,"./loader":8,"./logger":9,"./middleware":17,"./module":18,"./plugin":20,"./registry":22,"./utils":24,roolio:1}],4:[function(a,b,c){function d(a){if(!a)throw new TypeError("Must provide a manager");this.manager=a,this.context=h.getById(i())}function e(a,b){return a&&a.hasOwnProperty(b)}var f=a("./promise"),g=a("./utils"),h=a("./registry"),i=h.idGenerator("import"),j={IMPORTING:"importing"};d.prototype["import"]=function(a,b){var c=this;return"string"==typeof a?f.resolve(c._getModule(a,b)):f.all(a.map(function(a){return c._getModule(a,b)}))},d.prototype._getModule=function(a,b){b=b||{};var c=this,d=this.manager;return e(b.modules,a)?b.modules[a]:d.hasModule(a)?d.getModuleCode(a):c.hasModule(a)?c.getModule(a):new f(function(b,e){function h(a){e(g.reportError(a))}function i(e){return a!==e.name?f.reject(new TypeError("Module name must be the same as the name used for loading the Module itself")):(c.deleteModule(e.name),void b(d.getModuleCode(e.name)))}c.setModule(a,d.load(a)).then(i,h)})},d.prototype.hasModule=function(a){return this.context.hasModuleWithState(j.IMPORTING,a)},d.prototype.getModule=function(a){return this.context.getModuleWithState(j.IMPORTING,a)},d.prototype.setModule=function(a,b){return this.context.setModule(j.IMPORTING,a,b)},d.prototype.deleteModule=function(a){return this.context.deleteModule(a)},b.exports=d},{"./promise":21,"./registry":22,"./utils":24}],5:[function(a,b,c){function d(){}d.prototype.compile=function(a){a.configure({code:a.source})},b.exports=d},{}],6:[function(a,b,c){function d(){}d.prototype.fetch=function(){throw new TypeError("Fetcher:fetch is not implemented, must be implemented by the consumer code")},b.exports=d},{}],7:[function(a,b,c){function d(){}d.prototype.resolve=function(a){a.configure({cname:a.name})},b.exports=d},{}],8:[function(a,b,c){function d(a){if(!a)throw new TypeError("Must provide a manager");this.manager=a,this.context=i.getById(p()),this.pipeline=new h([k.pipeline,l.pipeline,m.pipeline,n.pipeline,o.pipeline])}var e=a("./promise"),f=a("./module"),g=a("./utils"),h=a("./pipeline"),i=a("./registry"),j=a("./meta/linker"),k=a("./meta/resolve"),l=a("./meta/fetch"),m=a("./meta/transform"),n=a("./meta/dependency"),o=a("./meta/compile"),p=i.idGenerator("loader");d.prototype.load=function(a,b){function c(){return d.asyncBuild(a)}var d=this,f=this.manager;return a?f.hasModule(a)?e.resolve(f.getModule(a)):d.isLoaded(a)||d.isPending(a)?e.resolve(c()):d.fetch(a,b).then(c,g.reportError):e.reject(new TypeError("Must provide the name of the module to load"))},d.prototype.fetch=function(a,b){function c(a){return d.setLoaded(a.name,a)}var d=this,h=this.manager;if(!a)return e.reject(new TypeError("Must provide the name of the module to fetch"));if(h.hasModule(a))return e.resolve();if(d.isLoading(a))return d.getLoading(a);b&&(b={name:b.name,path:b.path});var i=new f.Meta({name:a,referer:b}),j=d._pipelineModuleMeta(i).then(c,g.reportError);return d.setLoading(a,j)},d.prototype.syncBuild=function(a){if(this.manager.isModuleCached(a))return e.resolve(this.manager.getModule(a));if(this._compileModuleMeta(a),this.isPending(a))throw new TypeError("Unable to synchronously build dynamic module '"+a+"'");if(!this.isLoaded(a))throw new TypeError("Unable to synchronously build module '"+a+"'");return this._linkModuleMeta(a)},d.prototype.asyncBuild=function(a){var b=this;if(this.manager.isModuleCached(a))return e.resolve(this.manager.getModule(a));if(this._compileModuleMeta(a),this.isLoaded(a))return e.resolve().then(function(){return b._linkModuleMeta(a)},g.reportError);if(!this.isPending(a))throw new TypeError("Unable to build '"+a+"'.");var c=function(a){var c=a.deps.map(function(a){return b.asyncBuild(a)});return e.all(c).then(function(){return a},g.reportError)},d=function(){return b._linkModuleMeta(a)};return n.pipeline(b.manager,b.getModule(a)).then(c,g.reportError).then(d,g.reportError)},d.prototype.register=function(a,b,c,d){if(this.manager.isModuleCached(a))throw new TypeError("Module '"+a+"' is already loaded");this.setPending(a,new f.Meta({name:a,deps:b,factory:c,type:d}))},d.prototype.transform=function(a){if(!a)return e.reject(new TypeError("Must provide a module meta object"));if(!g.isString(a.source))throw e.reject(new TypeError("Must provide a source string property with the content to transform"));return a.deps=a.deps||[],m.pipeline(this.manager,a)},d.prototype.runPipeline=function(a){function b(){return a}return this.pipeline.run(this.manager,a).then(b,g.reportError)},d.prototype._pipelineModuleMeta=function(a){return f.Meta.isCompiled(a)?e.resolve(a):this.runPipeline(a)},d.prototype._compileModuleMeta=function(a){var b,c=this.manager;if(!this.isPending(a)){if(!this.isLoaded(a))throw this.manager.isModuleCached(a)?new TypeError("Module `"+a+"` is already built"):new TypeError("Module `"+a+"` is not loaded yet. Make sure to call `load` or `fetch` prior to calling `linkModuleMeta`");return b=this.getModule(a),o.compile(c,b)}},d.prototype._linkModuleMeta=function(a){var b,c=this.manager;if(this.manager.isModuleCached(a))throw new TypeError("Module `"+a+"` is already built");if(!this.isLoaded(a)&&!this.isPending(a))throw new TypeError("Module `"+a+"` is not loaded yet. Make sure to call `load` or `fetch` prior to calling `linkModuleMeta`");b=this.deleteModule(a);var d=j(c,b);return c.setModule(d),d},d.prototype.hasModule=function(a){return this.context.hasModule(a)},d.prototype.getModule=function(a){return this.context.getModule(a)},d.prototype.isLoading=function(a){return this.context.hasModuleWithState(f.State.LOADING,a)},d.prototype.getLoading=function(a){return this.context.getModuleWithState(f.State.LOADING,a)},d.prototype.setLoading=function(a,b){return this.context.setModule(f.State.LOADING,a,b)},d.prototype.isPending=function(a){return this.context.hasModuleWithState(f.State.PENDING,a)},d.prototype.getPending=function(a){return this.context.getModuleWithState(f.State.PENDING,a)},d.prototype.setPending=function(a,b){return this.context.setModule(f.State.PENDING,a,b)},d.prototype.isLoaded=function(a){return this.context.hasModuleWithState(f.State.LOADED,a)},d.prototype.getLoaded=function(a){return this.context.getModuleWithState(f.State.LOADED,a)},d.prototype.setLoaded=function(a,b){return this.context.setModule(f.State.LOADED,a,b)},d.prototype.deleteModule=function(a){return this.context.deleteModule(a)},b.exports=d},{"./meta/compile":10,"./meta/dependency":11,"./meta/fetch":12,"./meta/linker":13,"./meta/resolve":14,"./meta/transform":16,"./module":18,"./pipeline":19,"./promise":21,"./registry":22,"./utils":24}],9:[function(a,b,c){function d(a,b){b=b||{},this._enabled=!0,this.name=a,h(this,b),i(this,b)}function e(){var a;return"undefined"!=typeof console&&(a=console),a&&{write:function(b){a.log(b)}}}function f(){var a;return"undefined"!=typeof process&&process.stdout&&(a=process.stdout),a&&{write:function(b){a.write(b)}}}function g(){return{write:function(){}}}function h(a,b){a.stream=b.stream||e()||f()||g()}function i(a,b){b.serialize?a.serialize=b.serialize:"undefined"!=typeof process&&process.stdout&&(a.serialize=function(a){return"string"!=typeof a&&(a=JSON.stringify(a)),a})}function j(){return(new Date).getTime()}var k=!1,l=!1;d.prototype.factory=function(a,b){return new d(a,b)},d.prototype.log=function(){if(this.isEnabled()){var a={date:j(),type:"log",name:this.name,data:arguments};(d.stream||this.stream).write((d.serialize||this.serialize)(a))}},d.prototype.error=function(){if(this.isEnabled()){var a={date:j(),type:"error",name:this.name,data:arguments};(d.stream||this.stream).write((d.serialize||this.serialize)(a))}},d.prototype.warn=function(){if(this.isEnabled()){var a={date:j(),type:"warn",name:this.name,data:arguments};(d.stream||this.stream).write((d.serialize||this.serialize)(a))}},d.prototype.info=function(){if(this.isEnabled()){var a={date:j(),type:"info",name:this.name,data:arguments};(d.stream||this.stream).write((d.serialize||this.serialize)(a))}},d.prototype.serialize=function(a){return a},d.prototype.isEnabled=function(){return this._enabled&&k&&(!l||l===this.name)},d.prototype.enable=function(){this._enabled=!0},d.prototype.disable=function(){this._enabled=!1},d.prototype.only=function(){d._only||(d._only=this.name)},d.prototype.all=function(){d._only=null},d.prototype.disableAll=function(){d.disable()},d.prototype.enableAll=function(){d.enable()},d.prototype["default"]=d,d.enable=function(){k=!0},d.disable=function(){k=!1},d.only=function(a){l=a},d.all=function(){l=null},b.exports=new d},{}],10:[function(a,b,c){function d(){}function e(a,b){return!a.rules.ignore.compile.match(b.name)}var f=a("./runPipeline"),g=a("../promise"),h=a("../module"),i=a("../utils"),j=a("../logger").factory("Meta/Compiler");d.pipeline=function(a,b){function c(){return b}return j.log(b.name,b),h.Meta.canCompile(b)&&e(a,b)?f(a.pipelines.compile,b).then(c,i.reportError):g.resolve(b)},d.compile=function(a,b){j.log(b.name,b),e(a,b)&&h.Meta.canCompile(b)&&b.configure(a.compile(b))},b.exports=d},{"../logger":9,"../module":18,"../promise":21,"../utils":24,"./runPipeline":15}],11:[function(a,b,c){function d(){}function e(a,b){function c(){return b}var d,e,f=new Array(b.deps.length);for(d=0,e=b.deps.length;e>d;d++)f[d]=a.providers.loader.fetch(b.deps[d],b);return h.all(f).then(c,j.reportError)}function f(a,b){return!a.rules.ignore.dependency.match(b.name)}var g=a("./runPipeline"),h=a("../promise"),i=a("../module"),j=a("../utils"),k=a("../logger").factory("Meta/Dependency");d.pipeline=function(a,b){function c(){return i.Meta.hasDependencies(b)?e(a,b):b}return k.log(b.name,b),f(a,b)?g(a.pipelines.dependency,b).then(c,j.reportError):h.resolve(b)},b.exports=d},{"../logger":9,"../module":18,"../promise":21,"../utils":24,"./runPipeline":15}],12:[function(a,b,c){function d(){}function e(a,b){return!h.isString(b.source)&&!a.rules.ignore.fetch.match(b.name)}var f=a("./runPipeline"),g=a("../promise"),h=a("../utils"),i=a("../logger").factory("Meta/Fetch");d.pipeline=function(a,b){function c(){return h.isString(b.source)?b:d.fetch(a,b)}return i.log(b.name,b),e(a,b)?f(a.pipelines.fetch,b).then(c,h.reportError):g.resolve(b)},d.fetch=function(a,b){return i.log(b.name,b),e(a,b)?g.resolve(a.fetch(b)).then(function(a){return b.configure(a)},h.reportError):g.resolve(b)},b.exports=d},{"../logger":9,"../promise":21,"../utils":24,"./runPipeline":15}],13:[function(a,b,c){function d(a,b){function c(b){f.log(b.name,b);var d=b.deps.map(function(d){return b.meta&&b.meta.builtins&&b.meta.builtins.hasOwnProperty(d)?b.meta.builtins[d]:a.isModuleCached(d)?a.getModuleCode(d):c(a.getModule(d)).code});return b.factory&&!b.hasOwnProperty("code")&&(b.code=b.factory.apply(void 0,d)),b}if(!e.Meta.isCompiled(b))throw new TypeError("Module "+b.name+" cannot be linked");var d=new e(b);return d.name=b.name,d.meta=b,c(d)}var e=a("../module"),f=a("../logger").factory("Module/Linker");b.exports=d},{"../logger":9,"../module":18}],14:[function(a,b,c){function d(){}var e=a("./runPipeline"),f=a("../promise"),g=a("../utils"),h=a("../logger").factory("Meta/Resolve");d.pipeline=function(a,b){function c(){return b.hasOwnProperty("path")?b:d.resolve(a,b)}return h.log(b.name,b),e(a.pipelines.resolve,b).then(c,g.reportError)},d.resolve=function(a,b){return h.log(b.name,b),f.resolve(a.resolve(b)).then(function(a){return a=a||{},a.cname||(a.cname=a.name||a.path),delete a.name,b.configure(a)},g.reportError)},b.exports=d},{"../logger":9,"../promise":21,"../utils":24,"./runPipeline":15}],15:[function(a,b,c){function d(a,b){return e(b.plugins)?a.run(b.plugins,b,f.createCanExecute(b)):a.runAll(b,f.createCanExecute(b))}function e(a){return a&&a.length&&!(1===a.length&&!a[0])}var f=a("../plugin");b.exports=d},{"../plugin":20}],16:[function(a,b,c){function d(){}function e(a,b){return h.isString(b.source)&&!a.rules.ignore.transform.match(b.name)}var f=a("./runPipeline"),g=a("../promise"),h=a("../utils"),i=a("../logger").factory("Meta/Transform");d.pipeline=function(a,b){function c(){return b}return i.log(b.name,b),e(a,b)?f(a.pipelines.transform,b).then(c,h.reportError):g.resolve(b)},b.exports=d},{"../logger":9,"../promise":21,"../utils":24,"./runPipeline":15}],17:[function(a,b,c){function d(){}function e(a){this.settings=a||{},this.providers=[],this.named={}}function f(a,b,c){function d(a,d){function e(a){return a===!1&&(g=!0),g||c&&(!c||c(d)===!1)?void 0:d.execute(b)}function f(a){return g=!0,h.reportError(a)}var g=!1;return a.then(e,f)}return a.reduce(d,g.resolve())}var g=a("./promise"),h=a("./utils"),i=a("./logger").factory("Middleware");d.prototype.execute=function(a){return h.isFunction(this.handler)?this.handler.apply(this,a):void 0},e.prototype.use=function(a){h.isArray(a)||(a=[a]);var b,c,d,f;for(b=0,c=a.length;c>b;b++){if(f=a[b],!f)throw new TypeError("Middleware provider must not be empty");this.hasProvider(f.name)?e.configureProvider(this,this.getProvider(f.name),f):(d=e.createProvider(this,f),this.providers.push(d),h.isString(d.name)&&(this.named[d.name]=d))}return this},e.prototype.getProvider=function(a){if(!this.named.hasOwnProperty(a))throw new TypeError("Middleware provider '"+a+"' does not exist");return this.named[a]},e.prototype.hasProvider=function(a){return this.named.hasOwnProperty(a)},e.prototype.filterProviders=function(a){if(h.isString(a)&&(a=[a]),!h.isArray(a))throw new TypeError("List of handlers must be a string or an array of names");var b,c,d=[];for(b=0,c=a.length;c>b;b++)this.hasProvider(a[b])&&d.push(this.getProvider(a[b]));return d},e.prototype.run=function(a,b,c){b&&!h.isArray(b)&&(b=[b]);var d=this.filterProviders(a);return f(d,b,c)},e.prototype.runFirst=function(a,b,c){b&&!h.isArray(b)&&(b=[b]);var d=this.filterProviders(a).shift();return f(d?[d]:[],b,c)},e.prototype.runAll=function(a,b){return a&&!h.isArray(a)&&(a=[a]),f(this.providers,a,b)},e.configureProvider=function(a,b,c){if(h.isFunction(b.configure)&&b.configure(c),h.isFunction(c))b.handler=c;else if(h.isString(c))b.name=c,h.isFunction(b.handler)||(b.handler=e.deferredHandler(a,b));else if(h.isPlainObject(c)){if(!h.isFunction(c.handler)&&!h.isFunction(b.handler)){if(!h.isString(c.name))throw new TypeError("Middleware provider must have a handler method or a name");c.handler=e.deferredHandler(a,b)}h.extend(b,c)}return b},e.createProvider=function(a,b){var c;return(h.isFunction(b)||h.isString(b)||h.isPlainObject(b))&&(c=e.configureProvider(a,new d,b)),c||b},e.deferredHandler=function(a,b){function c(){return b.__deferred?i.log("import [pending]",b):(i.log("import [start]",b),b.__deferred=a.settings["import"](b.name).then(d,h.reportError)),b.__deferred}function d(c){i.log("import [end]",b),delete b.__deferred,e.configureProvider(a,b,c)}if(!a.settings["import"])throw new TypeError("You must configure an import method in order to dynamically load middleware providers");return function(){function a(){return b.execute(d)}var d=arguments;return c().then(a,h.reportError)}},e.Provider=d,b.exports=e},{"./logger":9,"./promise":21,"./utils":24}],18:[function(a,b,c){function d(a){if(!a)throw new TypeError("Must provide options to create the module");a.hasOwnProperty("code")&&(this.code=a.code),a.hasOwnProperty("factory")&&(this.factory=a.factory),this.type=a.type||g.UNKNOWN,this.id=a.id||a.name,this.name=a.name,this.deps=a.deps?a.deps.slice(0):[]}function e(a){if(a=a||{},f.isString(a)&&(a={name:a}),a.id=a.id||a.name,!f.isString(a.name))throw new TypeError("Must provide a name, which is used by the resolver to create a location for the resource");f.isArray(a.deps)||(delete a.deps,this.deps=[]),this.configure(a)}var f=a("./utils"),g={UNKNOWN:"UNKNOWN",AMD:"AMD",CJS:"CJS",IIFE:"IIFE"},h={LOADING:"loading",LOADED:"loaded",PENDING:"pending"};e.prototype.configure=function(a){return f.extend(this,a)},e.validate=function(a){if(!a)throw new TypeError("Must provide options");if(!e.isCompiled(a)&&!e.canCompile(a))throw new TypeError("ModuleMeta must provide a `source` string or `code`.")},e.hasDependencies=function(a){return a.deps&&a.deps.length},e.isCompiled=function(a){return a.hasOwnProperty("code")||f.isFunction(a.factory)},e.canCompile=function(a){return!e.isCompiled(a)&&f.isString(a.source)},d.Meta=e,d.Type=g,d.State=h,b.exports=d},{"./utils":24}],19:[function(a,b,c){function d(a){this.assets=a}var e=a("./promise"),f=a("./utils");d.prototype.run=function(){function a(a){return function(){return a.apply(void 0,b)}}var b=arguments;return this.assets.reduce(function(b,c){return b.then(a(c),f.reportError)},e.resolve())},b.exports=d},{"./promise":21,"./utils":24}],20:[function(a,b,c){function d(a,b){b=b||{},this.name=a||"plugin-"+n++,this.settings=b,this.services=b.services||b.pipelines,this._matches={},this._delegates={},this._handlers={}}function e(a,b,c){b.use({name:a.name,match:a._matches,handler:c})}function f(a,b){return function(c){function d(a,b){function d(){return b.handler.call(b,c,b.options)}return a.then(d,l.reportError)}return a._handlers[b].reduce(d,k.resolve())}}function g(a,b,c){if(!b)throw new TypeError("Plugin must have 'handlers' defined");return l.isArray(b)||(b=[b]),b.map(function(b){function d(c){function d(a){return delete b.pending,b.handler=a,a.call(b,c,b.options)}if(!b.pending)return b.pending=e,h(a,e).then(d,l.reportError)}var e;if(!b)throw new TypeError("Plugin handler must be a string, a function, or an object with a handler that is a string or a function");if((l.isFunction(b)||l.isString(b))&&(b={handler:b}),l.isString(b.handler)&&(e=b.handler,b.deferred=e,b.handler=d),!l.isFunction(b.handler))throw new TypeError("Plugin handler must be a function or a string");return c&&c(b),b})}function h(a,b){if(!a.settings["import"])throw new TypeError("You must configure an import method in order to dynamically load plugin handlers");return a.settings["import"](b)}function i(a,b){var c,d=0;for(var e in a)if(b.hasOwnProperty(e)&&a.hasOwnProperty(e)&&(c=a[e].getLength(),d+=c,c&&a[e].match(b[e])))return!0;return!d}function j(a){return function(b){return i(b.match,a)}}var k=a("./promise"),l=a("./utils"),m=a("roolio"),n=0;d.prototype.configure=function(a,b){var c=l.merge({},a);for(var d in c.match)c.match.hasOwnProperty(d)&&this.addMatchingRules(d,c.match[d]);for(var e in c)c.hasOwnProperty(e)&&"match"!==e&&this.addHandlers(e,c[e],b);return this},d.prototype.addMatchingRules=function(a,b){var c;return b&&b.length&&(c=this._matches[a]||(this._matches[a]=new m({name:a})),c.addMatcher(b)),this},d.prototype.addHandlers=function(a,b,c){if(!this.services.hasOwnProperty(a))throw new TypeError("Unable to register plugin for '"+a+"'. '"+a+"' is not found");return this._handlers[a]=g(this,b,c),this._delegates[a]||(this._delegates[a]=f(this,a),e(this,this.services[a],this._delegates[a])),this},d.canExecute=i,d.createCanExecute=j,b.exports=d},{"./promise":21,"./utils":24,roolio:1}],21:[function(a,b,c){!function(){"use strict";b.exports=Promise}()},{}],22:[function(a,b,c){function d(a){a=a||{},this._id=a.id||g(),this.modules=a.modules||new e}var e=a("./stateful-items"),f={};d.prototype.clear=function(){return f.hasOwnProperty(this._id)&&delete f[this._id],this},d.prototype.hasModule=function(a){return this.modules.hasItem(a)},d.prototype.getModule=function(a){return this.modules.getItem(a)},d.prototype.deleteModule=function(a){return this.modules.removeItem(a)},d.prototype.setModule=function(a,b,c){return this.modules.setItem(a,b,c)},d.prototype.getModuleState=function(a){return this.modules.getState(a)},d.prototype.hasModuleWithState=function(a,b){return this.modules.hasItemWithState(a,b)},d.prototype.getModuleWithState=function(a,b){return this.modules.getItemWithState(a,b)},d.getById=function(a){return a||(a=g()),f[a]||(f[a]=new d({id:a}))},d.clearById=function(a){return f.hasOwnProperty(a)?f[a].clear():void 0},d.idGenerator=function(a,b){a=(a||"generic")+"-";var c=b||0;return function(){return a+c++}};var g=d.idGenerator();b.exports=d},{"./stateful-items":23}],23:[function(a,b,c){function d(a){this.items=a||{}}d.prototype.getState=function(a){if(!this.hasItem(a))throw new TypeError("`"+a+"` not found");return this.items[a].state},d.prototype.hasItemWithState=function(a,b){return this.hasItem(b)&&this.items[b].state===a},d.prototype.getItemWithState=function(a,b){if(!this.hasItemWithState(a,b))throw new TypeError("`"+b+"` is not "+a);return this.items[b].item},d.prototype.hasItem=function(a){return this.items.hasOwnProperty(a)},d.prototype.getItem=function(a){if(!this.hasItem(a))throw new TypeError("`"+a+"` not found");return this.items[a].item},d.prototype.removeItem=function(a){if(!this.items.hasOwnProperty(a))throw new TypeError("`"+a+"` cannot be removed - not found");var b=this.items[a];return delete this.items[a],b.item},d.prototype.setItem=function(a,b,c){return(this.items[b]={item:c,state:a}).item},b.exports=d},{}],24:[function(a,b,c){function d(){}function e(a){return null===a||void 0===a}function f(a){return null===a}function g(a){return a instanceof Array}function h(a){return"string"==typeof a}function i(a){return"object"==typeof a}function j(a){return!!a&&!g(a)&&a.toString()===t}function k(a){return!e(a)&&a.constructor===Function}function l(a){return a instanceof Date}function m(a,b,c){return"function"===k(a)?a.apply(c,b||[]):a[b]}function n(a){return g(a)?a:Object.keys(a).map(function(b){return a[b]})}function o(a){var b,c,d,e=arguments;for(a=a||{},d=1,c=e.length;c>d;d++){b=e[d];for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f])}return a}function p(a){var b,c,d,e=arguments;for(a=a||{},d=1,c=e.length;c>d;d++){b=e[d];for(var f in b)b.hasOwnProperty(f)&&(j(b[f])?a[f]=p(a[f],b[f]):a[f]=b[f])}return a}function q(a){return a&&!a.handled&&(a.handled=!0,a.stack?console.log(a.stack):console.error(a)),a}function r(a){return a}function s(a){throw new TypeError("Not implemented. "+a)}var t=Object.prototype.toString();b.exports={isNil:e,isNull:f,isArray:g,isString:h,isObject:i,isPlainObject:j,isFunction:k,isDate:l,toArray:n,noop:d,result:m,extend:o,merge:p,reportError:q,forwardError:r,notImplemented:s}},{}]},{},[3])(3)});
//# sourceMappingURL=bit-loader.min.js.map