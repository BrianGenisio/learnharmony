!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.promjax=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){!function(e,f){"function"==typeof b&&"object"==typeof d&&"object"==typeof c?c.exports=f():"function"==typeof a&&a.amd?a(f):e.spromise=f()}(this,function(){var a,b;return function(){function c(a){return"function"==typeof a.factory?b(a.deps,a.factory):a.factory}function d(a,b){var d,e,g,h,i=[];for(d=0,e=a.length;e>d;d++){if(g=a[d],h=f[g]||b[g],!h)throw new TypeError("Module "+g+" has not yet been loaded");f[g]?(h.hasOwnProperty("code")||(h.code=c(h)),i[d]=h.code):i[d]=h}return i}var e=this,f={};b=function g(a,b){var c,h,i={};return i.require=g,i.exports={},i.module={exports:i.exports},"string"==typeof a&&(c=a,a=[a]),a.length&&(a=d(a.slice(0),i)),h="function"==typeof b?b.apply(e,a):f[c]?f[c].code:b,void 0===h?i.module.exports:h},a=function(a,b,c){f[a]={name:a,deps:b,factory:c}}}.call(this),a("src/samdy",function(){}),a("src/async",["require","exports","module"],function(a,b,c){function d(a){e(a)}var e;d.delay=function(a,b,c){setTimeout(a.apply.bind(a,this,c||[]),b)},e="object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:"function"==typeof setImmediate?setImmediate:function(a){setTimeout(a,0)},d.nextTick=e,c.exports=d}),a("src/promise",["require","exports","module","src/async"],function(a,b,c){function d(a,b){b=b||new e;var c=this;c.then=function(a,c){return b.then(a,c)},c.resolve=function(){return b.transition(j.resolved,arguments,this),c},c.reject=function(){return b.transition(j.rejected,arguments,this),c},c.promise={then:c.then,always:c.always,done:c.done,"catch":c.fail,fail:c.fail,notify:c.notify,state:c.state,constructor:d},c.promise.promise=c.promise,c.then.stateManager=b,a&&a.call(c,c.resolve,c.reject)}function e(a){this.state=j.pending,a&&a.state&&this.transition(a.state,a.value,a.context)}function f(a){this.promise=a.promise}function g(a){h.debug&&(console.error(a),a&&a.stack&&console.log(a.stack))}function h(a){return new d(a)}var i=a("src/async"),j={pending:0,resolved:1,rejected:2,always:3,notify:4},k=["pending","resolved","rejected"];d.prototype.done=function(a){return this.then.stateManager.enqueue(j.resolved,a),this.promise},d.prototype["catch"]=d.prototype.fail=function(a){return this.then.stateManager.enqueue(j.rejected,a),this.promise},d.prototype["finally"]=d.prototype.always=function(a){return this.then.stateManager.enqueue(j.always,a),this.promise},d.prototype.notify=function(a){return this.then.stateManager.enqueue(j.notify,a),this.promise},d.prototype.state=function(){return k[this.then.stateManager.state]},d.prototype.isPending=function(){return this.then.stateManager.state===j.pending},d.prototype.isResolved=function(){return this.then.stateManager.state===j.resolved},d.prototype.isRejected=function(){return this.then.stateManager.state===j.resolved},d.prototype.delay=function(a){var b=this;return new d(function(c,d){b.then(function(){i.delay(c.bind(this),a,arguments)},d.bind(this))})},e.prototype.enqueue=function(a,b){function c(){d.state===a||j.always===a?b.apply(d.context,d.value):j.notify===a&&b.call(d.context,d.state,d.value)}this.state?l.asyncTask(c):(this.queue||(this.queue=[])).push(c);var d=this},e.prototype.transition=function(a,b,c){if(!this.state){this.state=a,this.context=c,this.value=b;var d=this.queue;d&&(this.queue=null,l.asyncQueue(d))}},e.prototype.then=function(a,b){var c=this;if(a=a&&"function"==typeof a?a:null,b=b&&"function"==typeof b?b:null,!a&&c.state===j.resolved||!b&&c.state===j.rejected)return new d(null,c);var g=new d;return c.enqueue(j.notify,function(c,d){var h=c===j.resolved?a||b:b||a;h&&(d=e.runHandler(c,d,this,g,h)),d!==!1&&new f({promise:g}).finalize(c,d,this)}),g},e.runHandler=function(a,b,c,d,e){try{b=e.apply(c,b)}catch(f){return g(f),d.reject.call(c,f),!1}return void 0===b?[]:[b]},f.prototype.finalize=function(a,b,c){var e,f,g=this,h=this.promise;if(b.length)if(e=b[0],e===h)f=h.reject.call(c,new TypeError("Resolution input must not be the promise being resolved"));else if(e&&e.constructor===d)f=e.notify(function(a,b){g.finalize(a,b,this)});else if(void 0!==e&&null!==e)switch(typeof e){case"object":case"function":f=this.runThenable(e,c)}f||(a===j.resolved?h.resolve.apply(c,b):h.reject.apply(c,b))},f.prototype.runThenable=function(a,b){var c=this,d=!1;try{var e=a.then;if("function"==typeof e)return e.call(a,function(){d||(d=!0,c.finalize(j.resolved,arguments,this))},function(){d||(d=!0,c.promise.reject.apply(this,arguments))}),!0}catch(f){return d||c.promise.reject.call(b,f),!0}return!1};var l={_asyncQueue:[],asyncTask:function(a){1===l._asyncQueue.push(a)&&i(l.taskRunner(l._asyncQueue))},asyncQueue:function(a){l.asyncTask(1===a.length?a[0]:l.taskRunner(a))},taskRunner:function(a){return function(){for(var b;b=a[0];)l._runTask(b),a.shift()}},_runTask:function(a){try{a()}catch(b){g(b)}}};h.prototype=d.prototype,h.defer=function(){return new d},h.reject=function(){return new d(null,new e({context:this,value:arguments,state:j.rejected}))},h.resolve=h.thenable=function(a){if(a){if(a.constructor===d)return a;if("function"==typeof a.then)return new d(a.then)}return new d(null,new e({context:this,value:arguments,state:j.resolved}))},h.delay=function(a){var b=Array.prototype.slice(arguments,1);return new d(function(c){i.delay(c.bind(this),a,b)})},h.states=j,h.debug=!1,c.exports=h}),a("src/all",["require","exports","module","src/promise","src/async"],function(a,b,c){function d(a,b,c){return"function"==typeof a?a.apply(c,b||[]):a}function e(a){function b(){k--,k||i.resolve.call(j,h)}function c(a){return function(){h[a]=1===arguments.length?arguments[0]:arguments,b()}}function e(){var e,f,g;for(e=0,g=k;g>e;e++)f=a[e],f&&"function"==typeof f.then?f.then(c(e),i.reject):(h[e]=d(f),b())}a=a||[];var h=[],i=f.defer(),j=this,k=a.length;return a.length?(g(e),i):i.resolve(a)}var f=a("src/promise"),g=a("src/async");c.exports=e}),a("src/when",["require","exports","module","src/promise","src/all"],function(a,b,c){function d(){var a=this,b=arguments;return new e(function(c,d){f.call(a,b).then(function(b){c.apply(a,b)},function(b){d.call(a,b)})})}var e=a("src/promise"),f=a("src/all");c.exports=d}),a("src/race",["require","exports","module","src/promise"],function(a,b,c){function d(a){return a?new e(function(b,c){function d(){h||(h=!0,b.apply(this,arguments))}function e(){h||(h=!0,c.apply(this,arguments))}var f,g,h=!1;for(f=0,g=a.length;g>f;f++)a[f].then(d,e)}):e.resolve()}var e=a("src/promise");c.exports=d}),a("src/spromise",["require","exports","module","src/promise","src/async","src/when","src/all","src/race"],function(a,b,c){var d=a("src/promise");d.aync=a("src/async"),d.when=a("src/when"),d.all=a("src/all"),d.race=a("src/race"),c.exports=d}),b("src/spromise")})},{}],2:[function(a,b){!function(){"use strict";function c(a){"string"==typeof a&&(a={url:a});var b=f.defer(),c=new XMLHttpRequest,e=a.url,g=a.method||"GET",h=a.data||null,i=a.headers||{},j=Boolean(a.async);if(!e)throw new TypeError("Must provide a URL");for(var k in i)i.hasOwnProperty(k)&&c.setRequestHeader(k,i[k]);return j&&(c.onreadystatechange=d.bind(c,a,b)),c.open(g,e,j,a.user,a.password),c.send(h),j||d.call(c,a,b),b.promise}function d(a,b){var c=this,d=c.readyState;if(d===g.DONE)if(200===c.status){var f=(a.transform||e)(c.responseText,a.responseType);b.resolve(f,c)}else b.reject(c)}function e(a,b){return"json"===b?JSON.parse(a):a}var f=a("spromise"),g={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};b.exports=c}()},{spromise:1}]},{},[2])(2)});
//# sourceMappingURL=promjax.min.js.map